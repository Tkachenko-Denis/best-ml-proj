# Домашнее задание по теме 6: Инфраструктура как код

## Часть 1. Теоретическая

### Анализ задач для FireWatch.ai

| № | Задача | Инструмент | Почему? |
|---|--------|------------|---------|
| 1 | Создать каталог (Folder) | Terraform | Управление облачными ресурсами и их жизненным циклом - основная задача Terraform. Каталог - это инфраструктурная сущность Yandex.Cloud |
| 2 | Создать VPC и подсеть | Terraform | Сетевая инфраструктура - это декларативные ресурсы облака, которые идеально описываются в Terraform с возможностью версионирования |
| 3 | Создать бакет в Object Storage | Terraform | Бакет - это облачный ресурс с определенными параметрами (ACL, версионирование), управляется через API провайдера |
| 4 | Создать виртуальную машину | Terraform | ВМ - это инфраструктурный ресурс. Terraform создает саму машину, её параметры (CPU, RAM, диск), но не настраивает ПО внутри |
| 5 | Настроить группу безопасности | Terraform | Security Groups - это сетевые правила на уровне облачной инфраструктуры, описываются декларативно |
| 6 | Установить python3, docker | Ansible | Установка ПО внутри ВМ - это конфигурационная задача. Ansible работает с уже существующей инфраструктурой |
| 7 | Установить uv через pip | Ansible | Управление пакетами внутри ОС - типичная задача для Ansible. Требуется императивное выполнение команд |
| 8 | Создать пользователя ml-dev | Ansible | Настройка ОС (пользователи, права) - это конфигурация системы, не инфраструктура. Ansible имеет модуль user для этого |
| 9 | Скопировать requirements.txt | Ansible | Развертывание файлов приложения - задача конфигурационного менеджмента. Ansible использует модуль copy/template |
| 10 | Удалить виртуальную машину | Terraform | Удаление инфраструктурных ресурсов - это terraform destroy. Terraform отслеживает состояние и корректно удаляет зависимости |

### Общий принцип разделения:

- **Terraform**: Управление жизненным циклом облачных ресурсов (создание, изменение, удаление). Декларативный подход "что должно быть".
- **Ansible**: Конфигурация уже существующих систем (установка ПО, настройка, деплой). Императивный подход "как это сделать".

## Часть 2. Практическая

Конфигурационные файлы Terraform для развертывания инфраструктуры FireWatch.ai находятся в директории `terraform/`.

### Структура проекта:
```
terraform/
├── main.tf           # Основные ресурсы
├── variables.tf      # Переменные
├── outputs.tf        # Выходные значения
├── terraform.tfvars  # Значения переменных
└── README.md         # Инструкции по запуску
```

### Команды для работы:
```bash
cd terraform
terraform init
terraform plan
terraform apply
terraform destroy
```
